# Динамика на деревьях. Диаметр дерева. Центр дерева.
  
---  
**Дерево** — это связный граф с 1 компонентой связности и без циклов.

**Центр дерева** — вершина от которой **максимальное** расстояние до <ins>всех достижимых вершин</ins> будет **минимальным**.  
Количество вершин, являющимися центрами дерева может быть **1** или **2**.

**Корень дерева** — вершина за которую подвешивается дерево (у этой вершины нет родителя).  
**Лист дерева** — конечные вершины в дереве (у этой вершины нет потомков).
  
---  

## Поиск центра дерева

Имеется такой граф:

<img width="1047" alt="Screenshot 2022-06-24 at 20 11 28" src="https://user-images.githubusercontent.com/101647250/175618644-93f3a143-6177-4050-a972-ce1a305cdd33.png">


Рассмотрим каждую вершину:

- Вершина $0$. Самое далёкое расстояние от вершины $0$ будет $3$ ребра ($0 \longrightarrow 1 \longrightarrow 2 \longrightarrow 3$).
- Вершина $1$. Самое далёкое расстояние от вершины $1$ будет $2$ ребра ($1 \longrightarrow 0 \longrightarrow 5$ или $1 \longrightarrow 2 \longrightarrow 3$).
- Вершина $2$. Самое далёкое расстояние от вершины $2$ будет $3$ ребра ($2 \longrightarrow 1 \longrightarrow 0 \longrightarrow 5$).
- Вершина $3$. Самое далёкое расстояние от вершины $3$ будет $4$ ребра ($3 \longrightarrow 2 \longrightarrow 1 \longrightarrow 0 \longrightarrow 5$).
- Вершина $4$. Самое далёкое расстояние от вершины $4$ будет $3$ ребра ($4 \longrightarrow 1 \longrightarrow 0 \longrightarrow 5$ или $4 \longrightarrow 1 \longrightarrow 2 \longrightarrow 3$).
- Вершина $5$. Самое далёкое расстояние от вершины $5$ будет $4$ ребра ($5 \longrightarrow 0 \longrightarrow 1 \longrightarrow 2 \longrightarrow 3$).

Итак, центр этого дерева — вершина $1$, потому что от этой вершины максимально возможное расстояние до всех достижимых вершин является минимально возможным.

Пример дерева, у которого центр дерева — это две вершины (вершины $1$ и $2$):

<img width="1047" alt="Screenshot 2022-06-24 at 20 12 55" src="https://user-images.githubusercontent.com/101647250/175618765-319a9db7-928a-49e1-a3f6-7bc14e41eaf3.png">

Как это происходит в общем случае:
<img width="1047" alt="Screenshot 2022-06-24 at 20 12 11" src="https://user-images.githubusercontent.com/101647250/175618677-d06e74d6-c8df-405f-9b28-371663e8a686.png">


--- 
### Реализация

Асимптотика: $O(n + m)$

Центр дерева можно найти с помощью двух проходов DFS.
* Запускаем сначала обход в глубину от любой вершины и находим самую удалённую от неё.
* Теперь от этой самой удалённой вершины тоже запускаем обход.
* Запоминая максимальный путь, можем найти диаметр дерева, а по определению на середине диаметра будет находится центр дерева.

## Количество листов в дереве

Немного изменим DFS: теперь будем возвращать **1**, если попали в лист, иначе сумму ниже расположенных листов. Таким образом мы сможем посчитать все листься в дереве

## Выбор вершин дерева

Аналогично поменяем и в этом случае DFS: при каждом запуске будем хранить
* количестов покрашенных снизу листов
* количество листов

Заходя в каждую непосещённую вершину будем вызывать рекурсивно DFS и подсчитывать количество листов, а так же накапливать количество покрашенных листов, обращаясь к массиву **color** по индексу **to** (текущая достижимая из **v** вершина)

В случае, если количество покрашенных листов = 0, то текущая вершина это лист, значит прибавим к счётчику и пометим её, как покрашенную.

Запуск будем производить от корня дерева.
